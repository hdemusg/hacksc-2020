<!doctype html>
<html lang="en">
<head>
<title>Talk | NotAlone</title>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<style>
    .jumbotron {
        background-color: #00b7ff;
        color: #fff;
        padding: 60px 25px;
        font-family: Montserrat, sans-serif;
    }
    .btn{
        background-color: #00b7ff;
        border-color:  #00b7ff;
    }
    .nav-link{
        color:#00b7ff;
    }
    .container{
        margin-top:30px;
    }
    h1{
        font-size:40pt;
        font-weight:bold;
    }
</style>
</head>

<body> 

<!-- Nav tabs -->
<ul class="nav nav-tabs" id="navId">
    <li class="nav-item">
        <a href="#tab1Id" class="nav-link" data-toggle="tab">Chat</a>
    </li>
    <li class="nav-item">
        <a href="#tab2Id" class="nav-link" data-toggle="tab">Resources</a>
    </li>
         <li class="nav-item active">
        <a href="#tab3Id" class="nav-link" data-toggle="tab">About</a>
    </li>
    <!--
    <li class="nav-item">
        <a href="#tab4Id" class="nav-link" data-toggle="tab">Submit a Story</a>
    </li>
    <li class="nav-item">
        <a onclick="disconnect()" id="user" class="nav-link" data-toggle="tab"></a>
    </li>
-->
</ul>
<div class="tab-pane fade" id="tab1Id" role="tabpanel">
    <div class="container"> 
        <h3 id="statement" style='color: maroon;font-size: 24px;'>No message yet..</h3>
    <div class="message_holder">
    </div>
    <form method="post">
        <!-- <input type="text" class="username" placeholder="User Name"/> -->
        <input type="text" id="message" placeholder="How do you feel right now?" value=""/>
        <a id="update" onclick="update()" class="btn btn-primary" role="button" type="submit">Open Up!</a>
  </form>
    </div>
</div>
<div class="tab-pane fade" id="tab2Id" role="tabpanel">
    <div class="container"> 
        <h2> Resources</h2>
        <a href="https://suicidepreventionlifeline.org/"> Suicide Prevention Lifeline</a>
        <p> Phone: 1-800-273-8255</p>
        <a href="https://www.mentalhealth.gov/"> MentalHealth.gov </a>
    </div>
</div>
<div class="tab-pane fade" id="tab3Id" role="tabpanel">
    <div class="jumbotron text-center" style="margin-bottom:0">
        <h1>NotAlone</h1>
        <p>A platform for supporting each Other!</p> 
    </div>
    <div class="container">
        <div class=row>
            <div class="col-sm-8">
                <h2>Purpose</h2> 
                <p style="text-align: justify;">  
                    This website is dedicated to helping you find support by matching you with others who have gone through, or are 
                    currently going through, similar struggles. We believe that one of the most beneficial experiences can be to hear 
                    the stories of others and know that you're not alone. However, please know that this should not be treated as a 
                    substitute for getting proffesional help, but rather a supplemental resource for additional support. If you'd like
                    assistance in finding help, please visit our resources page.</p>
                <h2>Chat</h2>
                <p>Select the chat tab to begin connecting!</p>
                    <!---
                    <div class="dropdown">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Pick a Struggle
                        <span class="caret"></span></button>
                        <ul class="dropdown-menu">
                        <li><a href="#">Struggle</a></li>
                        <li><a href="#">Is</a></li>
                        <li><a href="#">Real</a></li>   
                        </ul>
                    </div>
                    -->
                <div class="row">
                    <form method="post">
                        <div class="form-group">
                                <!--<div class="col-sm-6">
                               <input type="username" class="form-control" id="username" placeholder="Username" name="username">
                            </div>
                            <div class="col-sm-6">
                                <input type="submit" class="btn btn-primary" value="Connect">-->
                                <!-- <a href="https://hacksc-2020-266907.appspot.com" id="connect" class="btn btn-primary" role="button" type="submit">Connect</a>    --> 
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-sm-4">
                <img src="{{url_for('static', filename='images/ppl.jpg')}}" class="img-responsive" alt="People" width="100%">
            </div>
        </div>
</div>
<div class="tab-pane fade" id="tab4Id" role="tabpanel">
    <div class="container"> 
        <h2> Fourth tab content</h2>
    </div>
</div>
</div>


<script>
    function update() {
        document.getElementById("statement").innerText = document.getElementById("message").value;
        document.getElementById("message").value = "";
        alert("Thank you for taking the initiative to get something off of your chest. Check the resources tab for help, and make sure to take care of yourself!")
        /*
        var t = '{ "phrase" : [' + document.getElementById("statement").innerText + ']}';
        var obj = JSON.parse(t)
        const Http = new XMLHttpRequest();
        const url = 'https://hacksc-2020-266907.appspot.com/analyze'
        Http.open("POST", url);
        Http.send(obj);
        Http.onreadystatechange=function(){
            if(this.readyState==4 && this.status==200) {
                console.log(Http.responseText);
            }
        }
        */
    }
</script>
<!--
    <script type="text/javascript">
    var socket = io.connect('http://' + document.domain);

    socket.on('connect', function() {
      socket.emit('my event', {
        data: 'User Connected'
      } )
      var form = $( 'form' ).on('submit', function( e ) {
        e.preventDefault()
        let user_name = $( 'input.username' ).val()
        let user_input = $( 'input.message' ).val()
        socket.emit('my event', {
          user_name : user_name,
          message : user_input
        } )
        $( 'input.message' ).val( '' ).focus()
      } )
    } )
    socket.on('my response', function( msg ) {
      console.log( msg )
      if( typeof msg.user_name !== 'undefined' ) {
        $( 'h3' ).remove()
        $( 'div.message_holder' ).append( '<div><b style="color: #000">'+msg.user_name+'</b> '+msg.message+'</div>' )
      }
    })
  </script>
 -->
  <!-- 
<script>
    $('#navId a').click(e => {
        e.preventDefault();
        $(this).tab('show');
    });
</script>
  -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous"></script>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-performance.js"></script>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
<!-- 
<script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
    apiKey: "AIzaSyASfYpZ9VHMcX8HkBZDKRjP041bjFuKK-s",
    authDomain: "hacksc-2020-266907.firebaseapp.com",
    databaseURL: "https://hacksc-2020-266907.firebaseio.com",
    projectId: "hacksc-2020-266907",
    storageBucket: "hacksc-2020-266907.appspot.com",
    messagingSenderId: "197496250123",
    appId: "1:197496250123:web:ecaf2b2d97226c01934c0e",
    measurementId: "G-Q088YEKY6Q"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
</script>
-->

<!-- 
<script>
    function initFirebaseAuth() {
        firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
    // User is signed in.
            /*
            var isAnonymous = user.isAnonymous;
            var username = document.getElementById("username").innerText;
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() { 
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                    callback(xmlHttp.responseText);
                }
            xmlHttp.open("GET", "https://hacksc-2020-266907.appspot.com/talk", true); // true for asynchronous 
            */
    // ...
        } else {

        // User is signed out.
            /*
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() { 
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                    callback(xmlHttp.responseText);
                }
            xmlHttp.open("GET", "https://hacksc-2020-266907.appspot.com/", true); // true for asynchronous
            */ 
        }
// ...
    });
    }

function disconnect() {
    firebase.auth().currentUser.delete().then(function() {
    // User deleted.
    }).catch(function(error) {
  // An error happened.
    });
}

function getUsername() {
    return firebase.auth().currentUser.username;
}

function getUid() {
    return firebase.auth().currentUser.uid;
}

function checkSignIn() {
    if (isUserSignedIn()) {
        document.getElementById("user").innerText = getUid() + " - sign out";
        console.log(getUid())
    } else {
        alert("could not log in. Try again")
        window.location.assign('https://hacksc-2020-266907.appspot.com/');
    }
}

function isUserSignedIn() {
    return !!firebase.auth().currentUser;
}
</script>
-->

</body>
</html>